<UserControl x:Class="WpfApp1.Panels.SystemTestPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:Controls="http://schemas.stackdose.com/wpf"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="1200">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Process Control Area -->
            <Border Grid.Row="0" 
                    BorderBrush="#4CAF50" BorderThickness="2" 
                    Background="#1A1A2E" Padding="10"
                    Margin="0,0,0,10">
                <StackPanel>
                    <TextBlock Text="Process Control" 
                               FontSize="18" FontWeight="Bold" 
                               Foreground="#4CAF50" 
                               Margin="0,0,0,10"/>

                    <Controls:SecuredButton 
                        Theme="Success" 
                        Height="60" Width="200" 
                        Content="Start Process" 
                        FontSize="16" 
                        RequiredLevel="Operator" 
                        OperationName="Start Process" 
                        Click="StartProcess_Click"
                        HorizontalAlignment="Left"/>
                </StackPanel>
            </Border>

            <!-- MessageBox Test Area -->
            <Border Grid.Row="1" 
                    BorderBrush="#00E5FF" BorderThickness="2" 
                    Background="#1A1A2E" Padding="10"
                    Margin="0,0,0,10">
                <StackPanel>
                    <TextBlock Text="MessageBox Thread Safety Test" 
                               FontSize="18" FontWeight="Bold" 
                               Foreground="#00E5FF" 
                               Margin="0,0,0,10"/>

                    <StackPanel Width="300" HorizontalAlignment="Left">
                        <Button Content="Test UI Thread MessageBox" 
                                Command="{Binding TestUIThreadMessageBoxCommand}"
                                Height="35" Margin="0,5" 
                                Background="#1E1E2E" 
                                Foreground="White" 
                                BorderBrush="#00E5FF"/>
                        <Button Content="Test Background Thread MessageBox" 
                                Command="{Binding TestBackgroundMessageBoxCommand}"
                                Height="35" Margin="0,5" 
                                Background="#1E1E2E" 
                                Foreground="White" 
                                BorderBrush="#FFA726"/>
                        <Button Content="Test Multiple MessageBox" 
                                Command="{Binding TestMultipleMessageBoxCommand}"
                                Height="35" Margin="0,5" 
                                Background="#1E1E2E" 
                                Foreground="White" 
                                BorderBrush="#4CAF50"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Theme Test Area -->
            <Border Grid.Row="2" 
                    BorderBrush="#AB47BC" BorderThickness="2" 
                    Background="#1A1A2E" Padding="10">
                <StackPanel>
                    <TextBlock Text="Theme Management Test" 
                               FontSize="18" FontWeight="Bold" 
                               Foreground="#AB47BC" 
                               Margin="0,0,0,10"/>

                    <StackPanel Width="250" HorizontalAlignment="Left">
                        <Button Content="Toggle Dark/Light" 
                                Click="ToggleTheme_Click"
                                Height="35" Margin="0,5" 
                                Background="#1E1E2E" 
                                Foreground="White" 
                                BorderBrush="#00E5FF"
                                ToolTip="Toggle Dark/Light theme"/>
                        
                        <Button Content="Theme Statistics" 
                                Click="ShowThemeStats_Click"
                                Height="35" Margin="0,5" 
                                Background="#1E1E2E" 
                                Foreground="White" 
                                BorderBrush="#FFA726"
                                ToolTip="Show registered theme-aware controls"/>
                        
                        <Button Content="Open Theme Demo" 
                                Click="OpenThemeDemo_Click"
                                Height="35" Margin="0,5" 
                                Background="#1E1E2E" 
                                Foreground="White" 
                                BorderBrush="#4CAF50"
                                ToolTip="Open full theme management demo window"/>
                        
                        <Button Content="Print Registered Controls" 
                                Click="PrintRegistered_Click"
                                Height="35" Margin="0,5" 
                                Background="#1E1E2E" 
                                Foreground="White" 
                                BorderBrush="#AB47BC"
                                ToolTip="Print all registered controls to Debug Console"/>
                        
                        <Button Content="Cleanup Dead References" 
                                Click="CleanupTheme_Click"
                                Height="35" Margin="0,5" 
                                Background="#1E1E2E" 
                                Foreground="White" 
                                BorderBrush="#F44336"
                                ToolTip="Manually cleanup dead WeakReferences"/>
                    </StackPanel>
                </StackPanel>
            </Border>

        </Grid>
    </ScrollViewer>
</UserControl>
