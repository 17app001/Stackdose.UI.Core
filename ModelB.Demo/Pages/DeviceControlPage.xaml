<UserControl x:Class="ModelB.Demo.Pages.DeviceControlPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:core="http://schemas.stackdose.com/wpf"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="1400">

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <!-- Fade In Animation -->
                    <DoubleAnimation Storyboard.TargetName="MainGrid"
                                   Storyboard.TargetProperty="Opacity"
                                   From="0.0"
                                   To="1.0"
                                   Duration="0:0:0.8"
                                   AccelerationRatio="0.2"
                                   DecelerationRatio="0.2"/>
                    <!-- Slide In Animation -->
                    <DoubleAnimation Storyboard.TargetName="MainGridTransform"
                                   Storyboard.TargetProperty="Y"
                                   From="30"
                                   To="0"
                                   Duration="0:0:0.8"
                                   AccelerationRatio="0.2"
                                   DecelerationRatio="0.2"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </UserControl.Triggers>

    <Grid x:Name="MainGrid" Background="{StaticResource BackgroundBrush}" Opacity="0">
        <Grid.RenderTransform>
            <TranslateTransform x:Name="MainGridTransform" Y="30"/>
        </Grid.RenderTransform>
        
        <!-- Main Content Area -->
        <Grid Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220"/>
                <ColumnDefinition Width="500"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Device Status Display (Top Left) -->
            <Border Grid.Column="0" Grid.Row="0"
                    Background="{DynamicResource Plc.Bg.Main}"
                    BorderBrush="{DynamicResource Plc.Border}"
                    BorderThickness="1"
                    CornerRadius="6"
                    Padding="12,8"
                    Margin="0,0,8,12"
                    HorizontalAlignment="Stretch">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Device Status:"
                               FontSize="14"
                               FontWeight="Medium"
                               Foreground="{DynamicResource Plc.Text.Label}"
                               VerticalAlignment="Center"
                               Margin="0,0,10,0"/>
                    <TextBlock x:Name="DeviceStatusText"
                               Text="Uninitialized"
                               FontSize="14"
                               FontWeight="Bold"
                               Foreground="{DynamicResource Plc.Text.Value}"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- Process Status Indicator (Top Right) -->
            <core:ProcessStatusIndicator x:Name="ProcessStatus"
                                         Grid.Column="2"
                                         Grid.Row="0"
                                         HorizontalAlignment="Right"
                                         Margin="0,0,0,12"
                                         VerticalAlignment="Top"
                                         ProcessState="Idle"/>

            <!-- Left Section: Function Buttons -->
            <Border Grid.Column="0"
                    Grid.Row="1"
                    Background="{DynamicResource Sensor.Bg.Main}"
                    BorderBrush="{DynamicResource Sensor.Border}"
                    BorderThickness="1"
                    CornerRadius="6"
                    Padding="16"
                    Margin="0,0,8,0">
                <StackPanel>
                    <TextBlock Text="PROCESS CONTROL"
                               FontSize="14"
                               FontWeight="Bold"
                               Foreground="{DynamicResource Sensor.Text.Title}"
                               FontFamily="Consolas"
                               Margin="0,0,0,16"
                               HorizontalAlignment="Center"/>
                    
                    <TextBlock Text="Process Flow Control"
                               FontSize="12"
                               Foreground="{DynamicResource Plc.Text.Label}"
                               Margin="0,0,0,20"
                               HorizontalAlignment="Center"/>

                    <!-- Device Initialization -->
                    <core:SecuredButton x:Name="BtnDeviceInit"
                                      Content="Device Init"
                                      RequiredLevel="Admin"
                                      OperationName="Device Initialization"
                                      Margin="0,0,0,12"
                                      Click="BtnDeviceInit_Click"
                                      HorizontalAlignment="Stretch"/>

                    <!-- Start Process -->
                    <core:SecuredButton x:Name="BtnStartProcess"
                                      Content="Start Process"
                                      RequiredLevel="Operator"
                                      OperationName="Start Production Process"
                                      Theme="Success"
                                      Margin="0,0,0,12"
                                      Click="BtnStartProcess_Click"
                                      HorizontalAlignment="Stretch"
                                      IsEnabled="False"/>

                    <!-- Pause Process -->
                    <core:SecuredButton x:Name="BtnPauseProcess"
                                      Content="Pause Process"
                                      RequiredLevel="Operator"
                                      OperationName="Pause Production Process"
                                      Theme="Warning"
                                      Margin="0,0,0,12"
                                      Click="BtnPauseProcess_Click"
                                      HorizontalAlignment="Stretch"
                                      IsEnabled="False"/>

                    <!-- Cancel Process -->
                    <core:SecuredButton x:Name="BtnCancelProcess"
                                      Content="Cancel Process"
                                      RequiredLevel="Supervisor"
                                      OperationName="Cancel Production Process"
                                      Theme="Error"
                                      Margin="0,0,0,12"
                                      Click="BtnCancelProcess_Click"
                                      HorizontalAlignment="Stretch"
                                      IsEnabled="False"/>

                    <!-- Error Reset -->
                    <core:SecuredButton x:Name="BtnErrorReset"
                                      Content="Error Reset"
                                      RequiredLevel="Instructor"
                                      OperationName="Error Reset and Recovery"
                                      Margin="0,0,0,0"
                                      Click="BtnErrorReset_Click"
                                      HorizontalAlignment="Stretch"
                                      IsEnabled="False"/>
                </StackPanel>
            </Border>

            <!-- Center Section: Data Display -->
            <Border Grid.Column="1"
                    Grid.Row="1"
                    Background="{DynamicResource Plc.Bg.Main}"
                    BorderBrush="{DynamicResource Plc.Border}"
                    BorderThickness="1"
                    CornerRadius="6"
                    Padding="16"
                    Margin="0,0,8,0">
                <StackPanel>
                    <TextBlock Text="PROCESS PARAMETERS"
                               FontSize="14"
                               FontWeight="Bold"
                               Foreground="{DynamicResource Plc.Text.Value}"
                               FontFamily="Consolas"
                               Margin="0,0,0,16"
                               HorizontalAlignment="Center"/>
                    
                    <TextBlock Text="Process Parameter Monitoring"
                               FontSize="12"
                               Foreground="{DynamicResource Plc.Text.Label}"
                               Margin="0,0,0,20"
                               HorizontalAlignment="Center"/>

                    <!-- Data Display Grid (2 columns, 6 rows) -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Row 0 -->
                        <core:PlcLabel Grid.Row="0" Grid.Column="0"
                                     Label="1. CDA Flow"
                                     Address="D100"
                                     DataType="Word"
                                     Divisor="10"
                                     StringFormat="F1"
                                     ValueFontSize="18"
                                     Margin="4"/>

                        <core:PlcLabel Grid.Row="0" Grid.Column="1"
                                     Label="2. CDA Volume"
                                     Address="D101"
                                     DataType="Word"
                                     Divisor="10"
                                     StringFormat="F1"
                                     ValueFontSize="18"
                                     Margin="4"/>

                        <!-- Row 1 -->
                        <core:PlcLabel Grid.Row="1" Grid.Column="0"
                                     Label="3. Swing Speed"
                                     Address="D102"
                                     DataType="Word"
                                     StringFormat="F0"
                                     ValueFontSize="18"
                                     Margin="4"/>

                        <core:PlcLabel Grid.Row="1" Grid.Column="1"
                                     Label="4. Batch No"
                                     Address="D103"
                                     DataType="Word"
                                     StringFormat="F0"
                                     ValueFontSize="18"
                                     Margin="4"/>

                        <!-- Row 2 -->
                        <core:PlcLabel Grid.Row="2" Grid.Column="0"
                                     Label="5. PreDry Temp"
                                     Address="D104"
                                     DataType="Word"
                                     Divisor="10"
                                     StringFormat="F1"
                                     ValueForeground="Warning"
                                     ValueFontSize="18"
                                     Margin="4"/>

                        <core:PlcLabel Grid.Row="2" Grid.Column="1"
                                     Label="6. PreDry Time"
                                     Address="D105"
                                     DataType="Word"
                                     StringFormat="F0"
                                     ValueFontSize="18"
                                     Margin="4"/>

                        <!-- Row 3 -->
                        <core:PlcLabel Grid.Row="3" Grid.Column="0"
                                     Label="7. Heat Zone1 Temp"
                                     Address="D106"
                                     DataType="Word"
                                     Divisor="10"
                                     StringFormat="F1"
                                     ValueForeground="Warning"
                                     ValueFontSize="18"
                                     Margin="4"/>

                        <core:PlcLabel Grid.Row="3" Grid.Column="1"
                                     Label="8. Heat Zone1 Time"
                                     Address="D107"
                                     DataType="Word"
                                     StringFormat="F0"
                                     ValueFontSize="18"
                                     Margin="4"/>

                        <!-- Row 4 -->
                        <core:PlcLabel Grid.Row="4" Grid.Column="0"
                                     Label="9. Heat Zone2 Temp"
                                     Address="D108"
                                     DataType="Word"
                                     Divisor="10"
                                     StringFormat="F1"
                                     ValueForeground="Warning"
                                     ValueFontSize="18"
                                     Margin="4"/>

                        <core:PlcLabel Grid.Row="4" Grid.Column="1"
                                     Label="10. Heat Zone2 Time"
                                     Address="D109"
                                     DataType="Word"
                                     StringFormat="F0"
                                     ValueFontSize="18"
                                     Margin="4"/>

                        <!-- Row 5 -->
                        <core:PlcLabel Grid.Row="5" Grid.Column="0"
                                     Label="11. Heat Zone3 Temp"
                                     Address="D110"
                                     DataType="Word"
                                     Divisor="10"
                                     StringFormat="F1"
                                     ValueForeground="Warning"
                                     ValueFontSize="18"
                                     Margin="4"/>

                        <core:PlcLabel Grid.Row="5" Grid.Column="1"
                                     Label="12. Heat Zone3 Time"
                                     Address="D111"
                                     DataType="Word"
                                     StringFormat="F0"
                                     ValueFontSize="18"
                                     Margin="4"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Right Section: Monitoring Components -->
            <Grid Grid.Column="2" Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="6*"/>
                    <RowDefinition Height="4*"/>
                </Grid.RowDefinitions>

                <!-- Sensor Viewer with ScrollViewer -->
                <Border Grid.Row="0"
                        Background="{DynamicResource Sensor.Bg.Main}"
                        BorderBrush="{DynamicResource Sensor.Border}"
                        BorderThickness="1"
                        CornerRadius="6"
                        Margin="0,0,0,8">
                    <ScrollViewer VerticalScrollBarVisibility="Auto"
                                  HorizontalScrollBarVisibility="Disabled">
                        <core:SensorViewer x:Name="MainSensorViewer"
                                         Title="SENSOR MONITORING"
                                         ConfigFile="Sensors.json"/>
                    </ScrollViewer>
                </Border>

                <!-- Live Log Viewer -->
                <Border Grid.Row="1"
                        Background="{DynamicResource Log.Bg.Main}"
                        BorderBrush="{DynamicResource Log.Border}"
                        BorderThickness="1"
                        CornerRadius="6">
                    <core:LiveLogViewer x:Name="MainLogViewer"/>
                </Border>
            </Grid>
        </Grid>
    </Grid>
</UserControl>
